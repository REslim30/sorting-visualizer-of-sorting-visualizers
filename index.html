<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>POC</title>
   <link rel="stylesheet" href="index.css">
   <script src="https://unpkg.com/@popperjs/core@2/dist/umd/popper.js"></script>
</head>
<body>
   <div id="view" style="display: flex; flex-direction: row; align-items: flex-end;">
   </div>
   <button>Sort</button>

   </button>

   <script>
      let data = [
{"repoFullName": "bingmann/sound-of-sorting", "stargazersCount": 771, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/2604907?v=4"},
{"repoFullName": "ForeignGods/Sorting-Algorithms-Blender", "stargazersCount": 637, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/78089013?v=4"},
{"repoFullName": "clementmihailescu/Sorting-Visualizer", "stargazersCount": 583, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/20826081?v=4"},
{"repoFullName": "w0rthy/ArrayVisualizer", "stargazersCount": 501, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/4707345?v=4"},
{"repoFullName": "sadanandpai/sorting-visualizer", "stargazersCount": 478, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/12962887?v=4"},
{"repoFullName": "LucasPilla/Sorting-Algorithms-Visualizer", "stargazersCount": 348, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/64286128?v=4"},
{"repoFullName": "test123/Sorting-Algorithm-Visualizer", "stargazersCount": 345, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/27031?v=4"},
{"repoFullName": "clementmihailescu/Sorting-Visualizer-Tutorial", "stargazersCount": 311, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/20826081?v=4"},
{"repoFullName": "ZQPei/Sorting_Visualization", "stargazersCount": 285, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/27885598?v=4"},
{"repoFullName": "cortex-lab/phy", "stargazersCount": 257, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/15247073?v=4"},
{"repoFullName": "zamhown/sorting-visualizer", "stargazersCount": 229, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/15249097?v=4"},
{"repoFullName": "vbohush/SortingAlgorithmAnimations", "stargazersCount": 205, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/6086469?v=4"},
{"repoFullName": "JasonFengGit/Visualizer", "stargazersCount": 195, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/40121574?v=4"},
{"repoFullName": "TamimEhsan/AlgorithmVisualizer", "stargazersCount": 188, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/54908501?v=4"},
{"repoFullName": "mportesi/sorting_algo_visualizer", "stargazersCount": 146, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/26901157?v=4"},
{"repoFullName": "ramiz-rahman/sort-visualizer", "stargazersCount": 143, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/18501223?v=4"},
{"repoFullName": "Kethantummala/Sorting_Visualizer", "stargazersCount": 125, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/29600681?v=4"},
{"repoFullName": "SimonWaldherr/GolangSortingVisualization", "stargazersCount": 122, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/198920?v=4"},
{"repoFullName": "Aaron-Bird/ivy", "stargazersCount": 106, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/25508292?v=4"},
{"repoFullName": "w0rthy/SortingVisualizer", "stargazersCount": 104, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/4707345?v=4"},
{"repoFullName": "Myphz/sortvisualizer", "stargazersCount": 83, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/71951166?v=4"},
{"repoFullName": "builtree/simulate", "stargazersCount": 82, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/92259040?v=4"},
{"repoFullName": "dipesh-m/Sorting-Visualizer", "stargazersCount": 72, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/62656237?v=4"},
{"repoFullName": "ayush-tiwari57/Algorithm-Visualizer", "stargazersCount": 60, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/47775419?v=4"},
{"repoFullName": "stoicaandrei/sorting-visualizer", "stargazersCount": 60, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/22038087?v=4"},
{"repoFullName": "jcjohnson/sorting.js", "stargazersCount": 59, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/2718714?v=4"},
{"repoFullName": "loonywizard/sorting-algos-visualizer", "stargazersCount": 57, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/29688204?v=4"},
{"repoFullName": "infinity052/Algorithm-Visualizer", "stargazersCount": 56, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/28987176?v=4"},
{"repoFullName": "bimsina/SortingAlgorithmsVisualizer", "stargazersCount": 55, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/29589003?v=4"},
{"repoFullName": "dmitmel/sorting-visualization", "stargazersCount": 54, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/15367354?v=4"},
{"repoFullName": "Bjarten/alvito", "stargazersCount": 53, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/3868659?v=4"},
{"repoFullName": "bbdzs/Sorting-Visualization-bbdzs", "stargazersCount": 49, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/57716813?v=4"},
{"repoFullName": "Sklyvan/RainbowSorting", "stargazersCount": 45, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/37016233?v=4"},
{"repoFullName": "techwithtim/Sorting-Algorithm-Visualizer", "stargazersCount": 44, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/35348871?v=4"},
{"repoFullName": "flatironinstitute/mountainlab-js", "stargazersCount": 44, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/32853892?v=4"},
{"repoFullName": "hisham-maged10/path-finder", "stargazersCount": 42, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/37720180?v=4"},
{"repoFullName": "AbdallahHemdan/Sorting-Visualizer", "stargazersCount": 40, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/40190772?v=4"},
{"repoFullName": "khoi/sorting-visualization", "stargazersCount": 40, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/6994441?v=4"},
{"repoFullName": "KarimElghamry/sorting-visualizer", "stargazersCount": 39, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/46113985?v=4"},
{"repoFullName": "skratchdot/audio-sort", "stargazersCount": 39, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/434470?v=4"},
{"repoFullName": "DissonantVoid/Godot-Sort-Visualizer", "stargazersCount": 38, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/69814029?v=4"},
{"repoFullName": "jniediek/combinato", "stargazersCount": 36, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/3511716?v=4"},
{"repoFullName": "lucs123/sorting-visualizer-matplotlib", "stargazersCount": 33, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/59704913?v=4"},
{"repoFullName": "sanusanth/Python-Basic-programs", "stargazersCount": 33, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/66163152?v=4"},
{"repoFullName": "alexZajac/ReduSort", "stargazersCount": 32, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/38042033?v=4"},
{"repoFullName": "vineet192/Sorting-Visualiser", "stargazersCount": 32, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/46975941?v=4"},
{"repoFullName": "Eliya-Shalom/Algo-Vision", "stargazersCount": 30, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/104057898?v=4"},
{"repoFullName": "burningion/sorting-visualized", "stargazersCount": 30, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/625414?v=4"},
{"repoFullName": "crazydjp/Sorting-Visualizer", "stargazersCount": 29, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/42148553?v=4"},
{"repoFullName": "CompilerStuck/sorting-visualizer", "stargazersCount": 29, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/53166536?v=4"},
{"repoFullName": "volfegan/PixelGlitch", "stargazersCount": 28, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/29288398?v=4"},
{"repoFullName": "dharshakch97/sort-visualizer", "stargazersCount": 27, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/55709747?v=4"},
{"repoFullName": "tranleduy2000/sortalgorithm", "stargazersCount": 27, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/19369448?v=4"},
{"repoFullName": "SMUsamaShah/VisualizingSorts", "stargazersCount": 26, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/385283?v=4"},
{"repoFullName": "mingrammer/sorting", "stargazersCount": 25, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/6178510?v=4"},
{"repoFullName": "CSALS/Sorting-Visualizer", "stargazersCount": 24, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/31367352?v=4"},
{"repoFullName": "AdityaPrakash-26/Sorting-Visualizer", "stargazersCount": 23, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/55011564?v=4"},
{"repoFullName": "GSAUC3/Algorithm_visualizer", "stargazersCount": 23, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/55054089?v=4"},
{"repoFullName": "FahadulShadhin/Sorting-Algorithms-Visualizer", "stargazersCount": 22, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/57651849?v=4"},
{"repoFullName": "nrsyed/sorts", "stargazersCount": 22, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/11943352?v=4"},
{"repoFullName": "LiamMcB/Sorting-Visualizer", "stargazersCount": 22, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/61030080?v=4"},
{"repoFullName": "harsh-solanki21/sorting-visualizer", "stargazersCount": 21, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/52111635?v=4"},
{"repoFullName": "Eckankar/PySortDemo", "stargazersCount": 21, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/21243?v=4"},
{"repoFullName": "polcats/VisualSort", "stargazersCount": 21, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/24451518?v=4"},
{"repoFullName": "Vishruth-S/SortSimple", "stargazersCount": 21, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/55310756?v=4"},
{"repoFullName": "roshan9419/Sortlizer", "stargazersCount": 21, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/53408220?v=4"},
{"repoFullName": "shubh67678/sorting-visualizer", "stargazersCount": 20, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/65152666?v=4"},
{"repoFullName": "spyke/spyke", "stargazersCount": 20, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/3375060?v=4"},
{"repoFullName": "VadymPinchuk/visualizer", "stargazersCount": 19, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/9134717?v=4"},
{"repoFullName": "klonnet23/helloy-word", "stargazersCount": 19, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/51766678?v=4"},
{"repoFullName": "bhargav95/sorting-algorithm-visualizer", "stargazersCount": 18, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/16274424?v=4"},
{"repoFullName": "xuqianzhi/Sorting-Visualizer", "stargazersCount": 18, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/40366675?v=4"},
{"repoFullName": "machadop1407/Sorting-Visualizer", "stargazersCount": 17, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/63262246?v=4"},
{"repoFullName": "Kazuya-san/Sorting-Visualizer", "stargazersCount": 17, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/72860737?v=4"},
{"repoFullName": "PB2204/Visual-Sort", "stargazersCount": 17, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/120979437?v=4"},
{"repoFullName": "ChrisOh431/ELPath", "stargazersCount": 17, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/39662993?v=4"},
{"repoFullName": "xiyuyizhi/rxjs-sort-visualization", "stargazersCount": 16, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/10459267?v=4"},
{"repoFullName": "7oSkaaa/Sorting-Algorithms", "stargazersCount": 16, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/63050133?v=4"},
{"repoFullName": "eeshannarula29/structlinks", "stargazersCount": 16, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/69961210?v=4"},
{"repoFullName": "Dadadah/sorting-visualization", "stargazersCount": 15, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/22386163?v=4"},
{"repoFullName": "sohail-js/sorting-visualizer", "stargazersCount": 15, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/42696137?v=4"},
{"repoFullName": "tuomaskivioja/SortingAlgorithmsVisualized", "stargazersCount": 15, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/86713957?v=4"},
{"repoFullName": "SemenovSY/sorting_visualizer", "stargazersCount": 15, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/37659532?v=4"},
{"repoFullName": "Abhi-Gautam/Sorting-Visualization-App", "stargazersCount": 15, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/57491668?v=4"},
{"repoFullName": "Sayan-Maity/Algorithm-Visualizer", "stargazersCount": 15, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/89021746?v=4"},
{"repoFullName": "zmon/Code-for-America-Projects-Hub", "stargazersCount": 15, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/447024?v=4"},
{"repoFullName": "lexesjan/react-sort-visualizer", "stargazersCount": 14, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/29843837?v=4"},
{"repoFullName": "GunawanAhmad/sorting-visualizer", "stargazersCount": 14, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/54525132?v=4"},
{"repoFullName": "ragnraok/VisualSort", "stargazersCount": 14, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/1225596?v=4"},
{"repoFullName": "54wall/SortAnimation", "stargazersCount": 14, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/15527279?v=4"},
{"repoFullName": "arnabuchiha/Algorithm-Visualizer", "stargazersCount": 14, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/26869021?v=4"},
{"repoFullName": "andrewringler/d3-sorting-algorithms", "stargazersCount": 14, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/691187?v=4"},
{"repoFullName": "ashirbad29/Sorting-Algorithm-Visualizer", "stargazersCount": 13, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/46968256?v=4"},
{"repoFullName": "ComputerScientist-01/Sorting-Visualizer", "stargazersCount": 13, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/39644109?v=4"},
{"repoFullName": "letelete/visualization-of-sorting-algorithms", "stargazersCount": 13, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/18665370?v=4"},
{"repoFullName": "fenbf/ViAlg-Update", "stargazersCount": 13, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/1734604?v=4"},
{"repoFullName": "CosminPerRam/StylishVisualizer", "stargazersCount": 13, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/7972857?v=4"},
{"repoFullName": "V9vek/Sorting-Visualizer", "stargazersCount": 13, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/40730402?v=4"},
{"repoFullName": "volfegan/PixelSorting", "stargazersCount": 13, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/29288398?v=4"},
{"repoFullName": "mrkchoi/sort-visualizer", "stargazersCount": 13, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/40152546?v=4"},
{"repoFullName": "yet-another-alex/dearpygui-examples", "stargazersCount": 13, "ownerAvatarUrl": "https://avatars.githubusercontent.com/u/95575915?v=4"},
]
   // truncate list
   randomize(data);

   let mouseX = 0;
   let mouseY = 0;

   document.onmousemove = ({ clientX, clientY }) => {
      mouseX = clientX;
      mouseY = clientY;
   };

   console.log("hello world")
   const view = document.getElementById("view");
   for (let i = 0; i < data.length; i++) {
      const repo = data[i];
      const div = document.createElement('a');
      div.style.display = 'flex';
      div.style.flexDirection = 'column';
      div.style.alignItems = 'center';
      div.style.marginLeft = '-9px';
      div.style.borderRadius = '5px';
      div.style.boxShadow = 'rgba(31, 35, 40, 0.15) 0px 0px 0px 1px;';
      div.style.backgroundColor = 'transparent';
      div.classList.add('repo-item')
      div.href = `https://github.com/${repo.repoFullName}` 

      const profile = document.createElement('img');
      profile.src = repo.ownerAvatarUrl;
      profile.loading = 'lazy'
      profile.style.height='20px'
      profile.style.width='20px'
      profile.style.objectFit='cover'
      profile.style.borderRadius='50%'
      profile.style.boxShadow = 'rgba(31, 35, 40, 0.15) 0px 0px 0px 1px;'

      const starBar = document.createElement('div');
      starBar.style.height = `${Math.log(repo.stargazersCount)*100}px`;
      starBar.style.width = '2px';
      starBar.style.backgroundColor = `red`;
      starBar.classList.add('star-bar')

      const popOver = document.createElement('div');
      popOver.innerHTML = `<a href="https://github.com/${repo.repoFullName}">${repo.repoFullName}</a>`;
      popOver.innerHTML += "<br>"
      popOver.innerHTML += repo.stargazersCount + " stars"
      popOver.style.display = 'none';
      popOver.style.backgroundColor = 'white';
      popOver.style.zIndex = '1000';


      div.appendChild(starBar);
      div.appendChild(profile);

      view.appendChild(div);
      view.appendChild(popOver)

      function generateGetBoundingClientRect(x = 0, y = 0, width=0, height=0) {
         return () => ({
            width: 0,
            height: 0,
            top: y - height/2,
            right: x,
            bottom: y ,
            left: x + width/2 + 15,
         });
      }

      const virtualElement = {
         getBoundingClientRect: generateGetBoundingClientRect(),
      };

      const instance = Popper.createPopper(virtualElement, popOver)

      const hidePopover = () => {
         popOver.style.display = 'none';
      }

      const showAndPositionPopover = () => {
         popOver.style.display = 'block';
         const { x, width } = div.getBoundingClientRect();
         virtualElement.getBoundingClientRect = generateGetBoundingClientRect(x + width/2 - 5, mouseY, popOver.offsetWidth, popOver.offsetHeight);
         instance.update();
      }

      const showPopOver = () => {
         popOver.style.display = 'block';
      }

      let delayedPopover = null;

      div.addEventListener('mouseenter', (event) => {
         delayedPopover = setTimeout(() => {
            showAndPositionPopover(event)
         }, 500);
         div.classList.add("hover")
      })
      div.addEventListener('focus', (event) => {
         delayedPopover = setTimeout(() => {
            showAndPositionPopover(event)
         }, 500);
         div.classList.add("hover")
      })
      div.addEventListener('mouseleave', (event) => {
         if (delayedPopover) {
            clearTimeout(delayedPopover);
            hidePopover();
            delayedPopover = null;
         }
         div.classList.remove("hover")
      });
      div.addEventListener('blur', (event) => {
         if (delayedPopover) {
            clearTimeout(delayedPopover);
            hidePopover();
            delayedPopover = null;
         }
         div.classList.remove("hover")
      });
      popOver.addEventListener('mouseleave', () => {
         hidePopover()
         div.classList.remove("hover");
      })
      popOver.addEventListener('blur', () => {
         hidePopover()
         div.classList.remove("hover")
      })
      popOver.addEventListener('mouseenter', () => {
         showPopOver()
         div.classList.add("hover");
      })
      popOver.addEventListener('focus', () => {
         showPopOver()
         div.classList.add("hover");
      })

   }

   function randomize(arr) {
      for (let i = 0; i < arr.length; i++) {
         const j = Math.floor(Math.random() * arr.length);
         const temp = arr[i];
         arr[i] = arr[j];
         arr[j] = temp;
      }
   }
   </script>
</body>
</html>